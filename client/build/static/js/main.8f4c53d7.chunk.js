(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){e.exports=n(54)},27:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),u=n.n(c),o=(n(27),n(9)),l=n(4),i=n(8),s=n(3),m=n.n(s),f=n(6),p=n(7),d=n.n(p);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.getStore,n=e.getActions,r=e.setStore;return{store:{counters:[],sort:{column:"",order:"desc",active:!0},query:"",filter:{less:!1,lessQuery:"",greater:!1,greaterQuery:""}},actions:{getCounters:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat("/api/v1/counter","s"));case 2:t=e.sent,r({counters:t.data});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleNewCounter:function(){var e=Object(f.a)(m.a.mark((function e(n){var a,c,u,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n.trim()){e.next=9;break}return a=t(),c={title:n},e.next=5,d.a.post("/api/v1/counter",c);case 5:u=e.sent,o=u.data,l=[].concat(Object(i.a)(a.counters),[o]),r({counters:l});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleAddition:function(){var e=Object(f.a)(m.a.mark((function e(n){var a,c,u,o,l,s,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),(c=a.sort).active=!1,c.column="",e.next=6,r({sort:c});case 6:return u=Object(i.a)(a.counters),o=u.indexOf(n),l={id:n.id},e.next=11,d.a.post("".concat("/api/v1/counter","/inc"),l);case 11:s=e.sent,f=s.data,u[o]=v({},f),r({counters:u});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleSubstraction:function(){var e=Object(f.a)(m.a.mark((function e(n){var a,c,u,o,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),c=Object(i.a)(a.counters),u=c.indexOf(n),o={id:n.id},e.next=6,d.a.post("".concat("/api/v1/counter","/dec"),o);case 6:l=e.sent,s=l.data,c[u]=v({},s),r({counters:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(f.a)(m.a.mark((function e(n){var a,c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),c=(c=Object(i.a)(a.counters)).filter((function(e){return e!==n})),r({counters:c}),u={id:n.id},e.next=7,d.a.delete("/api/v1/counter",{data:u});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleSort:function(e){var n=v({},t().sort);n.column===e?(n.order="asc"===n.order?"desc":"asc",n.active=!0):(n.column=e,n.order="asc",n.active=!0),r({sort:n})},handleSearch:function(e){""!==e.trim()?r({query:e}):r({query:""})},handleFilter:function(e,n){var a=v({},t().filter),c=parseInt(n);c&&("less"===e?(a.less=!0,a.lessQuery=c):(a.greater=!0,a.greaterQuery=c)),r({filter:a})},cleanFilter:function(e,n){var a=v({},t().filter);a[e]=!1,a[n]="",r({filter:a})},cleanSearch:function(){n().cleanFilter(),r({query:""})}}}};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=a.a.createContext(null),g=O.Consumer,j=O.Provider,w=function(e){return function(t){var n=Object(r.useState)(b({getStore:function(){return u.store},getActions:function(){return u.actions},setStore:function(e){return o({store:Object.assign(u.store,e),actions:y({},u.actions)})}})),c=Object(l.a)(n,2),u=c[0],o=c[1];return a.a.createElement(j,{value:u},a.a.createElement(e,t))}},N=(n(46),function(e){var t=e.item,n=e.actions,r=t.title,c=t.count;return a.a.createElement("tr",null,a.a.createElement("td",null,r),a.a.createElement("td",null,a.a.createElement("button",{className:"counter-btn",onClick:function(e){return n.handleSubstraction(t)}},"-")),a.a.createElement("td",{className:"text-center"},c),a.a.createElement("td",null,a.a.createElement("button",{className:"counter-btn",onClick:function(e){return n.handleAddition(t)}},"+")),a.a.createElement("td",null,a.a.createElement("button",{className:"delete-btn",onClick:function(e){return n.handleDelete(t)}},"Delete")))}),S=n(5),x=(n(47),function(e){var t=e.items,n=e.actions,r=e.sort;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"clickable",onClick:function(){return n.handleSort("title")}},"Title ","title"===r.column?"asc"===r.order?a.a.createElement(S.a,null):a.a.createElement(S.b,null):""),a.a.createElement("th",null),a.a.createElement("th",{className:"clickable text-center",onClick:function(){return n.handleSort("count")}},"# ","count"===r.column?"asc"===r.order?a.a.createElement(S.a,null):a.a.createElement(S.b,null):""),a.a.createElement("th",null),a.a.createElement("th",null))),a.a.createElement("tbody",null,t.map((function(e){return a.a.createElement(N,{item:e,key:e.name,actions:n})}))))}),C=(n(48),function(e){var t=e.total;return a.a.createElement("div",null,"TOTAL: ",a.a.createElement("div",{className:"total"},t))}),k=(n(49),function(e){var t=e.onNewCounter,n=Object(r.useState)(""),c=Object(l.a)(n,2),u=c[0],o=c[1],i=Object(r.useState)("hidden"),s=Object(l.a)(i,2),m=s[0],f=s[1];return a.a.createElement("form",{autocomplete:"off",className:"counter-generator",onSubmit:function(e){e.preventDefault(),o(""),t(u)}},a.a.createElement("button",{className:"counter-generator__btn",onClick:function(){return f(""===m?"hidden":"")}},"Add a counter"),a.a.createElement("input",{name:"title",value:u,placeholder:"Give it a name and press enter",type:"text",className:m,onChange:function(e){return function(e){var t=e.target.value;o(t)}(e)}}))}),P=n(20),F=n.n(P),D=(n(52),n(21)),Q=function(e){var t=e.onSearch,n=e.value;return a.a.createElement("div",{className:"searchbox"},a.a.createElement("input",{name:"query",placeholder:"Search...",type:"text",value:n,onChange:function(e){return t(e.target.value)}}),a.a.createElement("span",{className:"searchbox__icon"},a.a.createElement(D.a,null)))},q=(n(53),function(e){var t=e.actions,n=e.value,c=Object(r.useState)("hide"),u=Object(l.a)(c,2),o=u[0],i=u[1];return a.a.createElement("div",{className:"filters"},a.a.createElement("h6",{onClick:function(){i("hide"===o?"show":"hide")}},"Filter your results ",a.a.createElement("span",{className:"icon"},"show"!==o?a.a.createElement(S.a,null):"x")),a.a.createElement("div",{className:o},a.a.createElement("span",{className:"row"},a.a.createElement("label",{htmlFor:"less"},"Less than: "),a.a.createElement("input",{className:"sm-input",type:"number",name:"less",value:n.lessQuery,onFocus:function(){return t.cleanFilter("less","lessQuery")},onChange:function(e){return t.handleFilter(e.target.name,e.target.value)}})),a.a.createElement("span",{className:"row"},a.a.createElement("label",{htmlFor:"greater"},"Greater than: "),a.a.createElement("input",{className:"sm-input",type:"number",name:"greater",value:n.greaterQuery,onFocus:function(){return t.cleanFilter("greater","greaterQuery")},onChange:function(e){return t.handleFilter(e.target.name,e.target.value)}}))))}),A=w((function(){var e=null;return Object(r.useEffect)((function(){null!==e&&e.getCounters()}),[]),a.a.createElement(g,null,(function(t){var n=t.store,r=t.actions,c=n.counters,u=n.sort,o=n.query,l=n.filter;e=r;var i="",s="";if(c.length){i=c.map((function(e){return e.count})).reduce((function(e,t){return e+t}));var m=""!==o?c.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())})):c,f=l.less?l.greater?m.filter((function(e){return e.count<l.lessQuery&&e.count>l.greaterQuery})):m.filter((function(e){return e.count<l.lessQuery})):m,p=l.greater?f.filter((function(e){return e.count>l.greaterQuery})):f;s=u.active?F.a.orderBy(p,[u.column],[u.order]):p}return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",null,a.a.createElement(Q,{onSearch:r.handleSearch,value:n.query}),a.a.createElement(C,{total:i||0})),c.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(q,{actions:r,value:n.filter}),a.a.createElement("main",null,s.length?a.a.createElement(x,{items:s,actions:r,sort:u}):a.a.createElement("div",{className:"error"},"None of the counters match the specified conditions :( ",a.a.createElement("span",{className:"link",onClick:function(){return r.cleanSearch()}},"Go back")," "),a.a.createElement(k,{onNewCounter:r.handleNewCounter}))):a.a.createElement("main",{id:"full-screen"},a.a.createElement("h1",{className:"text-center"},"You don't have any counters yet"),a.a.createElement(k,{onNewCounter:r.handleNewCounter})))}))}));u.a.render(a.a.createElement(A,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.8f4c53d7.chunk.js.map