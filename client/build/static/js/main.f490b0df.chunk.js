(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){e.exports=n(60)},29:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(20),o=n.n(c),u=(n(29),n(9)),i=n(4),l=n(6),s=n(3),m=n.n(s),d=n(7),f=n(8),p=n.n(f),h=n(21),v=n.n(h),b=n(10),y=n.n(b);n(51),n(52);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=b.store,w=function(e){var t=e.getStore,n=e.getActions,a=e.setStore;return{store:{counters:[],filter:{less:!1,lessQuery:"",greater:!1,greaterQuery:""},item:{name:"",type:""},sort:{column:"",order:"desc",active:!0},query:""},actions:{getCounters:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat("/api/v1/counter","s"));case 3:t=e.sent,n=t.data,a({counters:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.addNotification({title:"We can't handle your information right now :(",message:"Please try again later",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),handleNewCounter:function(){var e=Object(d.a)(m.a.mark((function e(r){var c,o,u,i,s,d,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===r.trim()){e.next=21;break}return c=t(),o=n(),e.prev=3,e.next=6,o.getCounters();case 6:return u={title:r},e.next=9,p.a.post("/api/v1/counter",u);case 9:i=e.sent,s=i.data,d=[].concat(Object(l.a)(c.counters),[s]),f={lessQuery:"",greaterQuery:""},"",O.addNotification({title:"",message:"".concat(s.title," was successfully added"),type:"success",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}}),a({counters:d,filter:f,query:""}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),O.addNotification({title:"".concat(r," was not added"),message:"Sorry, your changes couldn't be saved",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"]});case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),handleAddition:function(){var e=Object(d.a)(m.a.mark((function e(n){var r,c,o,u,i,s,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),(c=r.sort).active=!1,e.next=5,a({sort:c});case 5:return o=Object(l.a)(r.counters),u=o.indexOf(n),e.prev=7,i={id:n.id},e.next=11,p.a.post("".concat("/api/v1/counter","/inc"),i);case 11:s=e.sent,d=s.data,o[u]=E({},d),a({counters:o}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),O.addNotification({title:"Something went wrong",message:"Sorry, your changes couldn't be saved",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"]});case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),handleSubstraction:function(){var e=Object(d.a)(m.a.mark((function e(n){var r,c,o,u,i,s,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),(c=r.sort).active=!1,e.next=5,a({sort:c});case 5:return o=Object(l.a)(r.counters),u=o.indexOf(n),e.prev=7,i={id:n.id},e.next=11,p.a.post("".concat("/api/v1/counter","/dec"),i);case 11:s=e.sent,d=s.data,o[u]=E({},d),a({counters:o}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),O.addNotification({title:"Something went wrong",message:"Sorry, your changes couldn't be saved",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"]});case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(d.a)(m.a.mark((function e(r){var c,o,u,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t(),o=n(),u=Object(l.a)(c.counters),(i=u.filter((function(e){return e!==r}))).length?a({counters:i}):o.cleanSearch(),e.prev=5,s={id:r.id},e.next=9,p.a.delete("/api/v1/counter",{data:s});case 9:O.addNotification({title:"",message:"".concat(r.title," was successfully deleted"),type:"success",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),O.addNotification({title:"".concat(r.title," was not deleted"),message:"Sorry, your changes couldn't be saved",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"]}),a({counters:u});case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),handleSort:function(e){var n=t(),r=E({},n.sort),c=Object(l.a)(n.counters);r.column===e?(r.order="asc"===r.order?"desc":"asc",r.active=!0):(r.column=e,r.order="asc",r.active=!0),c=r.active?v.a.orderBy(c,[r.column],[r.order]):c,a({sort:r,counters:c})},handleSearch:function(e){var r=t(),c=n();if(""!==e.trim()){var o=r.counters.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));a({query:e,counters:o})}else c.getCounters(),a({query:""})},handleFilter:function(e,r,c){var o=t(),u=n(),i=E({},o.filter),s=parseInt(c);if(""!==(s=Number.isNaN(s)?"":s)){i[e]=!0,i[r]=s;var m=Object(l.a)(o.counters);m="less"===e?m.filter((function(e){return e.count<i.lessQuery})):m.filter((function(e){return e.count>i.greaterQuery})),a({filter:i,counters:m})}else i[e]=!1,i.lessQuery="",i.greaterQuery="",u.getCounters(),a({filter:i})},cleanFilter:function(e,n){var r=E({},t().filter);r[e]=!1,r[n]="",a({filter:r})},cleanSearch:function(){var e=t(),r=n(),c=E({},e.filter);c.less=!1,c.lessQuery="",c.greater=!1,c.greaterQuery="",r.getCounters(),a({query:"",filter:c})}}}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=r.a.createContext(null),k=S.Consumer,x=S.Provider,C=function(e){return function(t){var n=Object(a.useState)(w({getStore:function(){return o.store},getActions:function(){return o.actions},setStore:function(e){return u({store:Object.assign(o.store,e),actions:N({},o.actions)})}})),c=Object(i.a)(n,2),o=c[0],u=c[1];return r.a.createElement(x,{value:o},r.a.createElement(e,t))}},P=(n(53),function(e){var t=e.item,n=e.actions,a=t.title,c=t.count;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,r.a.createElement("button",{className:"counter-btn",onClick:function(){return n.handleSubstraction(t)}},"-")),r.a.createElement("td",{className:"text-center"},c),r.a.createElement("td",null,r.a.createElement("button",{className:"counter-btn",onClick:function(){return n.handleAddition(t)}},"+")),r.a.createElement("td",null,r.a.createElement("button",{className:"delete-btn",onClick:function(){return n.handleDelete(t)}},"Delete")))}),I=n(5),Q=(n(54),function(e){var t=e.items,n=e.actions,a=e.sort;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"clickable",onClick:function(){return n.handleSort("title")}},"Title","title"===a.column&&a.active?"asc"===a.order?r.a.createElement(I.a,null):r.a.createElement(I.b,null):r.a.createElement(I.c,null)),r.a.createElement("th",null),r.a.createElement("th",{className:"clickable text-center",onClick:function(){return n.handleSort("count")}},"#","count"===a.column&&a.active?"asc"===a.order?r.a.createElement(I.a,null):r.a.createElement(I.b,null):r.a.createElement(I.c,null)),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(P,{item:e,key:e.id,actions:n})}))))}),D=(n(55),function(e){var t=e.total;return r.a.createElement("div",null,"TOTAL: ",r.a.createElement("div",{className:"total"},t))}),q=(n(56),function(e){var t=e.onNewCounter,n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],u=c[1],l=Object(a.useState)("hidden"),s=Object(i.a)(l,2),m=s[0],d=s[1];return r.a.createElement("form",{autoComplete:"off",className:"counter-generator",onSubmit:function(e){e.preventDefault(),u(""),t(o)}},r.a.createElement("button",{className:"counter-generator__btn",onClick:function(){return d("visible"===m?"hidden":"visible")}},"Create counter"),r.a.createElement("input",{name:"title",value:o,placeholder:"Name your counter",type:"text",className:m,onChange:function(e){return function(e){var t=e.target.value;u(t)}(e)}}))}),F=(n(57),n(22)),_=function(e){var t=e.onSearch,n=e.value;return r.a.createElement("div",{className:"searchbox"},r.a.createElement("input",{name:"query",placeholder:"Search...",type:"text",value:n,onChange:function(e){return t(e.target.value)}}),r.a.createElement("span",{className:"searchbox__icon"},r.a.createElement(F.a,null)))},A=(n(58),n(23)),B=function(e){var t=e.actions,n=e.value,c=Object(a.useState)("hide"),o=Object(i.a)(c,2),u=o[0],l=o[1];return r.a.createElement("section",{className:"filters"},r.a.createElement("header",{className:"filters__header",onClick:function(){return function(e){l("hide"===e?"show":"hide")}(u)}},r.a.createElement("h6",null,"Filter your results"),r.a.createElement("div",{className:"icon"},r.a.createElement(A.a,null))),r.a.createElement("main",{className:u},r.a.createElement("span",{className:"row"},r.a.createElement("label",{htmlFor:"less"},"Less than: "),r.a.createElement("input",{className:"sm-input",type:"number",name:"less",value:n.lessQuery,onChange:function(e){return t.handleFilter("less","lessQuery",e.target.value)}})),r.a.createElement("span",{className:"row"},r.a.createElement("label",{htmlFor:"greater"},"Greater than: "),r.a.createElement("input",{className:"sm-input",type:"number",name:"greater",value:n.greaterQuery,onChange:function(e){return t.handleFilter("greater","greaterQuery",e.target.value)}}))))},G=(n(59),function(){return r.a.createElement("h1",{className:"error"},"Create your first counter!")}),L=function(e){var t=e.onGoBack;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,"Sorry, there are no counters that match the specified conditions :("),r.a.createElement("span",{className:"link",onClick:t},"Go back"))},T=C((function(){var e=null;return Object(a.useEffect)((function(){null!==e&&e.getCounters()}),[]),r.a.createElement(k,null,(function(t){var n=t.store,a=t.actions,c=n.counters,o=n.sort,u=n.query,i=n.filter;e=a;var l="";return c.length&&(l=c.map((function(e){return e.count})).reduce((function(e,t){return e+t}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null),r.a.createElement("header",{className:"header"},r.a.createElement(_,{onSearch:a.handleSearch,value:n.query}),r.a.createElement(D,{total:l||0})),r.a.createElement(B,{actions:a,value:n.filter}),r.a.createElement("main",{className:"main"},c.length?r.a.createElement(Q,{items:c,actions:a,sort:o}):u||i.less||i.greater?r.a.createElement(L,{onGoBack:function(){return a.cleanSearch()}}):r.a.createElement(G,null),r.a.createElement(q,{onNewCounter:a.handleNewCounter})))}))}));o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.f490b0df.chunk.js.map