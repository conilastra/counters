{"ast":null,"code":"import _defineProperty from \"/Users/coni/Desktop/cornershop-test/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Axios from 'axios';\nconst apiEndpoint = '/api/v1/counter';\n\nconst getState = ({\n  getStore,\n  getActions,\n  setStore\n}) => {\n  return {\n    store: {\n      counters: [],\n      sort: {\n        column: '',\n        order: '',\n        active: false\n      },\n      query: '',\n      filter: {\n        type: '',\n        number: ''\n      }\n    },\n    actions: {\n      getCounters: async () => {\n        const response = await Axios.get(\"\".concat(apiEndpoint, \"s\"));\n        setStore({\n          counters: response.data\n        });\n      },\n      handleNewCounter: async title => {\n        if (title.trim() !== '') {\n          const store = getStore();\n          const obj = {\n            title\n          };\n\n          const _ref = await Axios.post(apiEndpoint, obj),\n                counter = _ref.data;\n\n          const counters = [...store.counters, counter];\n          setStore({\n            counters\n          });\n        }\n      },\n      handleAddition: async item => {\n        const store = getStore();\n        const counters = [...store.counters];\n        const index = counters.indexOf(item);\n        const obj = {\n          id: item.id\n        };\n\n        const _ref2 = await Axios.post(\"\".concat(apiEndpoint, \"/inc\"), obj),\n              counter = _ref2.data;\n\n        counters[index] = _objectSpread({}, counter);\n        setStore({\n          counters\n        });\n      },\n      handleSubstraction: async item => {\n        const store = getStore();\n        const counters = [...store.counters];\n        const index = counters.indexOf(item);\n        const obj = {\n          id: item.id\n        };\n\n        const _ref3 = await Axios.post(\"\".concat(apiEndpoint, \"/dec\"), obj),\n              counter = _ref3.data;\n\n        counters[index] = _objectSpread({}, counter);\n        setStore({\n          counters\n        });\n      },\n      handleDelete: async item => {\n        const store = getStore();\n        let counters = [...store.counters];\n        counters = counters.filter(c => c !== item);\n        setStore({\n          counters\n        });\n        const obj = {\n          id: item.id\n        };\n        await Axios.delete(apiEndpoint, {\n          data: obj\n        });\n      },\n      handleSort: selectedColumn => {\n        const store = getStore();\n\n        let sort = _objectSpread({}, store.sort);\n\n        if (sort.column === selectedColumn) {\n          sort.order = sort.order === 'asc' ? 'desc' : 'asc';\n          sort.active = true;\n        } else {\n          sort.column = selectedColumn;\n          sort.order = 'asc';\n          sort.active = false;\n        }\n\n        setStore({\n          sort\n        });\n      },\n      handleSearch: query => {\n        if (query.trim() !== '') {\n          setStore({\n            query\n          });\n        } else {\n          setStore({\n            query: ''\n          });\n        }\n      },\n      handleFilter: (type, amount) => {\n        let number;\n\n        if (amount !== '') {\n          number = parseInt(amount);\n        } else {\n          number = '';\n        }\n\n        setStore({\n          filter: {\n            type,\n            number\n          }\n        });\n      }\n    }\n  };\n};\n\nexport default getState;","map":{"version":3,"sources":["/Users/coni/Desktop/cornershop-test/client/src/store/flux.js"],"names":["Axios","apiEndpoint","getState","getStore","getActions","setStore","store","counters","sort","column","order","active","query","filter","type","number","actions","getCounters","response","get","data","handleNewCounter","title","trim","obj","post","counter","handleAddition","item","index","indexOf","id","handleSubstraction","handleDelete","c","delete","handleSort","selectedColumn","handleSearch","handleFilter","amount","parseInt"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,WAAW,GAAG,iBAApB;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,UAAZ;AAAwBC,EAAAA;AAAxB,CAAD,KAAwC;AACxD,SAAO;AACNC,IAAAA,KAAK,EAAE;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,IAAI,EAAE;AACLC,QAAAA,MAAM,EAAE,EADH;AAELC,QAAAA,KAAK,EAAE,EAFF;AAGLC,QAAAA,MAAM,EAAE;AAHH,OAFA;AAONC,MAAAA,KAAK,EAAE,EAPD;AAQNC,MAAAA,MAAM,EAAE;AACPC,QAAAA,IAAI,EAAE,EADC;AAEPC,QAAAA,MAAM,EAAE;AAFD;AARF,KADD;AAcNC,IAAAA,OAAO,EAAE;AACRC,MAAAA,WAAW,EAAE,YAAY;AACxB,cAAMC,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,GAAN,WAAalB,WAAb,OAAvB;AACAI,QAAAA,QAAQ,CAAC;AAAEE,UAAAA,QAAQ,EAAEW,QAAQ,CAACE;AAArB,SAAD,CAAR;AACA,OAJO;AAKRC,MAAAA,gBAAgB,EAAE,MAAOC,KAAP,IAAiB;AAClC,YAAIA,KAAK,CAACC,IAAN,OAAiB,EAArB,EAAyB;AACxB,gBAAMjB,KAAK,GAAGH,QAAQ,EAAtB;AAEA,gBAAMqB,GAAG,GAAG;AAAEF,YAAAA;AAAF,WAAZ;;AAHwB,uBAIE,MAAMtB,KAAK,CAACyB,IAAN,CAAWxB,WAAX,EAAwBuB,GAAxB,CAJR;AAAA,gBAIVE,OAJU,QAIhBN,IAJgB;;AAKxB,gBAAMb,QAAQ,GAAG,CAAE,GAAGD,KAAK,CAACC,QAAX,EAAqBmB,OAArB,CAAjB;AAEArB,UAAAA,QAAQ,CAAC;AAAEE,YAAAA;AAAF,WAAD,CAAR;AACA;AACD,OAfO;AAgBRoB,MAAAA,cAAc,EAAE,MAAOC,IAAP,IAAgB;AAC/B,cAAMtB,KAAK,GAAGH,QAAQ,EAAtB;AACA,cAAMI,QAAQ,GAAG,CAAE,GAAGD,KAAK,CAACC,QAAX,CAAjB;AACA,cAAMsB,KAAK,GAAGtB,QAAQ,CAACuB,OAAT,CAAiBF,IAAjB,CAAd;AAEA,cAAMJ,GAAG,GAAG;AAAEO,UAAAA,EAAE,EAAEH,IAAI,CAACG;AAAX,SAAZ;;AAL+B,sBAML,MAAM/B,KAAK,CAACyB,IAAN,WAAcxB,WAAd,WAAiCuB,GAAjC,CAND;AAAA,cAMjBE,OANiB,SAMvBN,IANuB;;AAO/Bb,QAAAA,QAAQ,CAACsB,KAAD,CAAR,qBAAuBH,OAAvB;AAEArB,QAAAA,QAAQ,CAAC;AAAEE,UAAAA;AAAF,SAAD,CAAR;AACA,OA1BO;AA2BRyB,MAAAA,kBAAkB,EAAE,MAAOJ,IAAP,IAAgB;AACnC,cAAMtB,KAAK,GAAGH,QAAQ,EAAtB;AACA,cAAMI,QAAQ,GAAG,CAAE,GAAGD,KAAK,CAACC,QAAX,CAAjB;AACA,cAAMsB,KAAK,GAAGtB,QAAQ,CAACuB,OAAT,CAAiBF,IAAjB,CAAd;AAEA,cAAMJ,GAAG,GAAG;AAAEO,UAAAA,EAAE,EAAEH,IAAI,CAACG;AAAX,SAAZ;;AALmC,sBAMT,MAAM/B,KAAK,CAACyB,IAAN,WAAcxB,WAAd,WAAiCuB,GAAjC,CANG;AAAA,cAMrBE,OANqB,SAM3BN,IAN2B;;AAOnCb,QAAAA,QAAQ,CAACsB,KAAD,CAAR,qBAAuBH,OAAvB;AAEArB,QAAAA,QAAQ,CAAC;AAAEE,UAAAA;AAAF,SAAD,CAAR;AACA,OArCO;AAsCR0B,MAAAA,YAAY,EAAE,MAAOL,IAAP,IAAgB;AAC7B,cAAMtB,KAAK,GAAGH,QAAQ,EAAtB;AACA,YAAII,QAAQ,GAAG,CAAE,GAAGD,KAAK,CAACC,QAAX,CAAf;AACAA,QAAAA,QAAQ,GAAGA,QAAQ,CAACM,MAAT,CAAiBqB,CAAD,IAAOA,CAAC,KAAKN,IAA7B,CAAX;AACAvB,QAAAA,QAAQ,CAAC;AAAEE,UAAAA;AAAF,SAAD,CAAR;AAEA,cAAMiB,GAAG,GAAG;AAAEO,UAAAA,EAAE,EAAEH,IAAI,CAACG;AAAX,SAAZ;AACA,cAAM/B,KAAK,CAACmC,MAAN,CAAalC,WAAb,EAA0B;AAAEmB,UAAAA,IAAI,EAAEI;AAAR,SAA1B,CAAN;AACA,OA9CO;AA+CRY,MAAAA,UAAU,EAAGC,cAAD,IAAoB;AAC/B,cAAM/B,KAAK,GAAGH,QAAQ,EAAtB;;AACA,YAAIK,IAAI,qBAAQF,KAAK,CAACE,IAAd,CAAR;;AAEA,YAAIA,IAAI,CAACC,MAAL,KAAgB4B,cAApB,EAAoC;AACnC7B,UAAAA,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACE,KAAL,KAAe,KAAf,GAAuB,MAAvB,GAAgC,KAA7C;AACAF,UAAAA,IAAI,CAACG,MAAL,GAAc,IAAd;AACA,SAHD,MAGO;AACNH,UAAAA,IAAI,CAACC,MAAL,GAAc4B,cAAd;AACA7B,UAAAA,IAAI,CAACE,KAAL,GAAa,KAAb;AACAF,UAAAA,IAAI,CAACG,MAAL,GAAc,KAAd;AACA;;AAEDN,QAAAA,QAAQ,CAAC;AAAEG,UAAAA;AAAF,SAAD,CAAR;AACA,OA7DO;AA8DR8B,MAAAA,YAAY,EAAG1B,KAAD,IAAW;AACxB,YAAIA,KAAK,CAACW,IAAN,OAAiB,EAArB,EAAyB;AACxBlB,UAAAA,QAAQ,CAAC;AAAEO,YAAAA;AAAF,WAAD,CAAR;AACA,SAFD,MAEO;AACNP,UAAAA,QAAQ,CAAC;AAAEO,YAAAA,KAAK,EAAE;AAAT,WAAD,CAAR;AACA;AACD,OApEO;AAqER2B,MAAAA,YAAY,EAAE,CAACzB,IAAD,EAAO0B,MAAP,KAAkB;AAC/B,YAAIzB,MAAJ;;AACA,YAAIyB,MAAM,KAAK,EAAf,EAAmB;AAClBzB,UAAAA,MAAM,GAAG0B,QAAQ,CAACD,MAAD,CAAjB;AACA,SAFD,MAEO;AACNzB,UAAAA,MAAM,GAAG,EAAT;AACA;;AACDV,QAAAA,QAAQ,CAAC;AAAEQ,UAAAA,MAAM,EAAE;AAAEC,YAAAA,IAAF;AAAQC,YAAAA;AAAR;AAAV,SAAD,CAAR;AACA;AA7EO;AAdH,GAAP;AA8FA,CA/FD;;AAiGA,eAAeb,QAAf","sourcesContent":["import Axios from 'axios';\n\nconst apiEndpoint = '/api/v1/counter';\n\nconst getState = ({ getStore, getActions, setStore }) => {\n\treturn {\n\t\tstore: {\n\t\t\tcounters: [],\n\t\t\tsort: {\n\t\t\t\tcolumn: '',\n\t\t\t\torder: '',\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\tquery: '',\n\t\t\tfilter: {\n\t\t\t\ttype: '',\n\t\t\t\tnumber: ''\n\t\t\t}\n\t\t},\n\t\tactions: {\n\t\t\tgetCounters: async () => {\n\t\t\t\tconst response = await Axios.get(`${apiEndpoint}s`);\n\t\t\t\tsetStore({ counters: response.data });\n\t\t\t},\n\t\t\thandleNewCounter: async (title) => {\n\t\t\t\tif (title.trim() !== '') {\n\t\t\t\t\tconst store = getStore();\n\n\t\t\t\t\tconst obj = { title };\n\t\t\t\t\tconst { data: counter } = await Axios.post(apiEndpoint, obj);\n\t\t\t\t\tconst counters = [ ...store.counters, counter ];\n\n\t\t\t\t\tsetStore({ counters });\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleAddition: async (item) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tconst counters = [ ...store.counters ];\n\t\t\t\tconst index = counters.indexOf(item);\n\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tconst { data: counter } = await Axios.post(`${apiEndpoint}/inc`, obj);\n\t\t\t\tcounters[index] = { ...counter };\n\n\t\t\t\tsetStore({ counters });\n\t\t\t},\n\t\t\thandleSubstraction: async (item) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tconst counters = [ ...store.counters ];\n\t\t\t\tconst index = counters.indexOf(item);\n\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tconst { data: counter } = await Axios.post(`${apiEndpoint}/dec`, obj);\n\t\t\t\tcounters[index] = { ...counter };\n\n\t\t\t\tsetStore({ counters });\n\t\t\t},\n\t\t\thandleDelete: async (item) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tlet counters = [ ...store.counters ];\n\t\t\t\tcounters = counters.filter((c) => c !== item);\n\t\t\t\tsetStore({ counters });\n\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tawait Axios.delete(apiEndpoint, { data: obj });\n\t\t\t},\n\t\t\thandleSort: (selectedColumn) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tlet sort = { ...store.sort };\n\n\t\t\t\tif (sort.column === selectedColumn) {\n\t\t\t\t\tsort.order = sort.order === 'asc' ? 'desc' : 'asc';\n\t\t\t\t\tsort.active = true;\n\t\t\t\t} else {\n\t\t\t\t\tsort.column = selectedColumn;\n\t\t\t\t\tsort.order = 'asc';\n\t\t\t\t\tsort.active = false;\n\t\t\t\t}\n\n\t\t\t\tsetStore({ sort });\n\t\t\t},\n\t\t\thandleSearch: (query) => {\n\t\t\t\tif (query.trim() !== '') {\n\t\t\t\t\tsetStore({ query });\n\t\t\t\t} else {\n\t\t\t\t\tsetStore({ query: '' });\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleFilter: (type, amount) => {\n\t\t\t\tlet number;\n\t\t\t\tif (amount !== '') {\n\t\t\t\t\tnumber = parseInt(amount);\n\t\t\t\t} else {\n\t\t\t\t\tnumber = '';\n\t\t\t\t}\n\t\t\t\tsetStore({ filter: { type, number } });\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport default getState;\n"]},"metadata":{},"sourceType":"module"}