{"ast":null,"code":"import _defineProperty from\"/Users/coni/Desktop/cornershop-test/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/coni/Desktop/cornershop-test/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/coni/Desktop/cornershop-test/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/coni/Desktop/cornershop-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import Axios from'axios';var apiEndpoint='/api/v1/counter';var getState=function getState(_ref){var getStore=_ref.getStore,getActions=_ref.getActions,setStore=_ref.setStore;return{store:{counters:[],sort:{column:'',order:'',active:false},query:'',filter:{type:'',number:''}},actions:{getCounters:function(){var _getCounters=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(apiEndpoint,\"s\"));case 2:response=_context.sent;setStore({counters:response.data});case 4:case\"end\":return _context.stop();}}},_callee);}));function getCounters(){return _getCounters.apply(this,arguments);}return getCounters;}(),handleNewCounter:function(){var _handleNewCounter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){var store,obj,_ref2,counter,counters;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(title.trim()!=='')){_context2.next=9;break;}store=getStore();obj={title:title};_context2.next=5;return Axios.post(apiEndpoint,obj);case 5:_ref2=_context2.sent;counter=_ref2.data;counters=[].concat(_toConsumableArray(store.counters),[counter]);setStore({counters:counters});case 9:case\"end\":return _context2.stop();}}},_callee2);}));function handleNewCounter(_x){return _handleNewCounter.apply(this,arguments);}return handleNewCounter;}(),handleAddition:function(){var _handleAddition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){var store,counters,index,obj,_ref3,counter;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:store=getStore();counters=_toConsumableArray(store.counters);index=counters.indexOf(item);obj={id:item.id};_context3.next=6;return Axios.post(\"\".concat(apiEndpoint,\"/inc\"),obj);case 6:_ref3=_context3.sent;counter=_ref3.data;counters[index]=_objectSpread({},counter);setStore({counters:counters});case 10:case\"end\":return _context3.stop();}}},_callee3);}));function handleAddition(_x2){return _handleAddition.apply(this,arguments);}return handleAddition;}(),handleSubstraction:function(){var _handleSubstraction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item){var store,counters,index,obj,_ref4,counter;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:store=getStore();counters=_toConsumableArray(store.counters);index=counters.indexOf(item);obj={id:item.id};_context4.next=6;return Axios.post(\"\".concat(apiEndpoint,\"/dec\"),obj);case 6:_ref4=_context4.sent;counter=_ref4.data;counters[index]=_objectSpread({},counter);setStore({counters:counters});case 10:case\"end\":return _context4.stop();}}},_callee4);}));function handleSubstraction(_x3){return _handleSubstraction.apply(this,arguments);}return handleSubstraction;}(),handleDelete:function(){var _handleDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item){var obj,_ref5,counter;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:obj={id:item.id};_context5.next=3;return Axios.delete(apiEndpoint,obj);case 3:_ref5=_context5.sent;counter=_ref5.data;console.log(counter);//setStore({ counters });\ncase 6:case\"end\":return _context5.stop();}}},_callee5);}));function handleDelete(_x4){return _handleDelete.apply(this,arguments);}return handleDelete;}(),handleSort:function handleSort(selectedColumn){var store=getStore();var sort=_objectSpread({},store.sort);if(sort.column===selectedColumn){sort.order=sort.order==='asc'?'desc':'asc';sort.active=true;}else{sort.column=selectedColumn;sort.order='asc';sort.active=false;}setStore({sort:sort});},handleSearch:function handleSearch(query){if(query.trim()!==''){setStore({query:query});}else{setStore({query:''});}},handleFilter:function handleFilter(type,amount){var number;if(amount!==''){number=parseInt(amount);}else{number='';}setStore({filter:{type:type,number:number}});}}};};export default getState;","map":{"version":3,"sources":["/Users/coni/Desktop/cornershop-test/client/src/store/flux.js"],"names":["Axios","apiEndpoint","getState","getStore","getActions","setStore","store","counters","sort","column","order","active","query","filter","type","number","actions","getCounters","get","response","data","handleNewCounter","title","trim","obj","post","counter","handleAddition","item","index","indexOf","id","handleSubstraction","handleDelete","delete","console","log","handleSort","selectedColumn","handleSearch","handleFilter","amount","parseInt"],"mappings":"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","sourcesContent":["import Axios from 'axios';\n\nconst apiEndpoint = '/api/v1/counter';\n\nconst getState = ({ getStore, getActions, setStore }) => {\n\treturn {\n\t\tstore: {\n\t\t\tcounters: [],\n\t\t\tsort: {\n\t\t\t\tcolumn: '',\n\t\t\t\torder: '',\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\tquery: '',\n\t\t\tfilter: {\n\t\t\t\ttype: '',\n\t\t\t\tnumber: ''\n\t\t\t}\n\t\t},\n\t\tactions: {\n\t\t\tgetCounters: async () => {\n\t\t\t\tconst response = await Axios.get(`${apiEndpoint}s`);\n\t\t\t\tsetStore({ counters: response.data });\n\t\t\t},\n\t\t\thandleNewCounter: async (title) => {\n\t\t\t\tif (title.trim() !== '') {\n\t\t\t\t\tconst store = getStore();\n\n\t\t\t\t\tconst obj = { title };\n\t\t\t\t\tconst { data: counter } = await Axios.post(apiEndpoint, obj);\n\t\t\t\t\tconst counters = [ ...store.counters, counter ];\n\n\t\t\t\t\tsetStore({ counters });\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleAddition: async (item) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tconst counters = [ ...store.counters ];\n\t\t\t\tconst index = counters.indexOf(item);\n\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tconst { data: counter } = await Axios.post(`${apiEndpoint}/inc`, obj);\n\t\t\t\tcounters[index] = { ...counter };\n\n\t\t\t\tsetStore({ counters });\n\t\t\t},\n\t\t\thandleSubstraction: async (item) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tconst counters = [ ...store.counters ];\n\t\t\t\tconst index = counters.indexOf(item);\n\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tconst { data: counter } = await Axios.post(`${apiEndpoint}/dec`, obj);\n\t\t\t\tcounters[index] = { ...counter };\n\n\t\t\t\tsetStore({ counters });\n\t\t\t},\n\t\t\thandleDelete: async (item) => {\n\t\t\t\tconst obj = { id: item.id };\n\t\t\t\tconst { data: counter } = await Axios.delete(apiEndpoint, obj);\n\n\t\t\t\tconsole.log(counter);\n\n\t\t\t\t//setStore({ counters });\n\t\t\t},\n\t\t\thandleSort: (selectedColumn) => {\n\t\t\t\tconst store = getStore();\n\t\t\t\tlet sort = { ...store.sort };\n\n\t\t\t\tif (sort.column === selectedColumn) {\n\t\t\t\t\tsort.order = sort.order === 'asc' ? 'desc' : 'asc';\n\t\t\t\t\tsort.active = true;\n\t\t\t\t} else {\n\t\t\t\t\tsort.column = selectedColumn;\n\t\t\t\t\tsort.order = 'asc';\n\t\t\t\t\tsort.active = false;\n\t\t\t\t}\n\n\t\t\t\tsetStore({ sort });\n\t\t\t},\n\t\t\thandleSearch: (query) => {\n\t\t\t\tif (query.trim() !== '') {\n\t\t\t\t\tsetStore({ query });\n\t\t\t\t} else {\n\t\t\t\t\tsetStore({ query: '' });\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleFilter: (type, amount) => {\n\t\t\t\tlet number;\n\t\t\t\tif (amount !== '') {\n\t\t\t\t\tnumber = parseInt(amount);\n\t\t\t\t} else {\n\t\t\t\t\tnumber = '';\n\t\t\t\t}\n\t\t\t\tsetStore({ filter: { type, number } });\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport default getState;\n"]},"metadata":{},"sourceType":"module"}